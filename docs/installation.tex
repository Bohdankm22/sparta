\htmlhr
\chapter{Installation\label{installation}}

This chapter briefly describes how to install the SPARTA project tools.

\section{Compiling the SPARTA code}

\begin{enumerate}

\item Required programs:

\begin{itemize}
\item Download and install Java 7. Add \<.../jdk1.7.0/bin> to the
  beginning of the PATH variable and set \<JAVA\_HOME> to
  \<.../jdk1.7.0>.

\item Ensure you have recent versions of ant and Mercurial (\<hg>) installed;
  ant version 1.8.2 and Mercurial version 2.0.2 are known to work.

\item Install the Android SDK to some directory. Set \<ANDROID\_HOME> to that
  location.
  Download the \<android-15> target.

\item If using Eclipse, go to
\<Help $\rightarrow$ Install New Software>
and install the Android ADT Plugin (\url{https://dl-ssl.google.com/android/eclipse}) and MercurialEclipse (\url{http://cbes.javaforge.com/update}).

\end{itemize}


\item Install the Checker Framework tool set.

Linux is our development platform, but we know of successful uses on
MacOS; Windows is possible, but takes more effort.

Follow the instructions at:

\url{http://types.cs.washington.edu/checker-framework/current/checkers-manual.html#build-source}

Note: As of 24 August 2012, the annotation-tools test cases
produce some error output. This is expected and can be ignored.


\item
Install the SPARTA tools

\begin{itemize}
\item
 Download the SPARTA code from \url{http://types.cs.washington.edu/sparta/release/}.
(Please do not publicize this URL.)

\item
Unpack the archive.

\item
Google gson is a dependency for the "-json" targets for projects.
Get it from \url{http://code.google.com/p/google-gson/};
create directory \<sparta-code/lib> and unzip gson there.
Alternatively, set build property \<gson.jar>, which defaults to:

\begin{alltt}
gson.jar=${basedir}/lib/google-gson-2.2.2/gson-2.2.2.jar
\end{alltt}
% make Emacs $ happy

\item
Build the \<sparta.jar> file.

In the \<sparta-code> directory, run

\begin{alltt}
ant jar
\end{alltt}

\noindent
It is necessary to specify the Android SDK location, by setting the \<ANDROID\_HOME>
environment variable or the \<android.home> property.  Here is an example
of the latter:

\begin{alltt}
ant -Dandroid.home=... jar
\end{alltt}

See file \<build.properties> for other configuration properties.

See the output of \<ant -p> for the build and test targets.

All projects can also be built and tested in Eclipse.
Import the annotation-tools, jsr308-langtools, checkers, javaparser,
and sparta-code projects into a workspace.
\end{itemize}

\item Run test cases.

As a sanity check of the installation, run

\begin{alltt}
ant all-tests
\end{alltt}

You should see ``\<BUILD SUCCESSFUL>'' at the end.
\end{enumerate}



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "manual"
%%% TeX-command-default: "PDF"
%%% End: 

%  LocalWords:  hg SDK ADT Plugin MercurialEclipse gson json sparta jsr308
%  LocalWords:  Dandroid langtools javaparser
